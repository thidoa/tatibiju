{% extends 'base.html' %}
{% load static %}
{% block content %}

    <title>Meu pedido</title>
</head>
<body>
    {% include 'partials/_alerts.html' %}
    {% include 'partials/_buscar.html' %}

    <h1>Pedido</h1>
    {% if pedidos %}
        {% for pedido in pedidos %}
            <div class="pedidos">
                <div class="cards cards_cart">
                    <div class="header-pedido gerente">
                        <div>
                            <p>Cliente:</p>
                            <p class="rosa">{{ usuario.username }}</p>
                        </div>
                        <div>
                            <p>N° do pedido:</p>
                            <p class="rosa">{{ pedido.id }}</p>
                        </div>
                        <div>
                            <p>Status <img class="icon-info" src="{% static 'img/info-icon.png' %}" alt=""></p>
                            <p class="rosa">{{ pedido.status_pedido }}</p>
                        </div>
                    </div>
                    {% for produto in pedido.produtos.all %}
                        <div class="card" style="width: 18rem;">
                            <img class="card-img-top" src="{{ produto.product.image.url }}" alt="Card image cap">
                            <div class="card-body">
                                <h5 class="card-title">{{ produto.product.titulo }}</h5>
                                <h5 class="card-title">R$ {{ produto.product.preco }}</h5>
                                <h5 class="card-title">Unidades: {{ produto.quantidade }}</h5>
                            </div>
                        </div>
                        <input type="text" name="texto-{{ pedido.id }}" id="texto-{{ pedido.id }}" value="{{ produto.quantidade }} x {{ produto.product.titulo }}" hidden/>
                    {% endfor %}
                    <div class="total-pedidos">
                        <p>TOTAL: R$ {{ pedido.total }}</p>
                        <input type="text" id="total-{{ pedido.id }}" value="{{ pedido.total }}" hidden/>
                        <span class="button" onclick="copiarTexto({{pedido.id}})">
                            <span id="copied-{{ pedido.id }}">Copiar</span>
                            <img id="copied_img-{{ pedido.id }}" src="{% static 'img/icon_ok.png' %}" alt="">
                        </span>
                    </div>
                </div>
            </div>
        {% endfor %}
    {% else %}
        <p>Pedido não encontrado</p>
    {% endif %}

    <script src="{% static 'js/detail.js' %}"></script>

{% endblock %}
    
